<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Fool & Princess Denasia: The Quest for Baklava and Forgiveness</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(to bottom, #1a1a2e, #16213e);
    color: #fff;
    font-family: "Trebuchet MS", sans-serif;
    text-align: center;
    overflow: hidden;
  }

  #scene {
    position: relative;
    height: 100vh;
    width: 100vw;
  }

  #dialogue {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 10px;
    font-size: 18px;
    line-height: 1.6;
  }

  #next {
    background: #e94560;
    border: none;
    color: white;
    padding: 12px 30px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 18px;
    transition: 0.3s;
  }

  #next:hover {
    background: #ff6b81;
  }

  #choices button {
    background: #4b8cff;
    border: none;
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    margin: 5px;
    cursor: pointer;
    font-size: 17px;
  }

  #choices button:hover {
    background: #77a8ff;
  }

  .character {
    position: absolute;
    bottom: 100px;
    width: 200px;
    transition: all 1s ease;
  }

  #moe {
    left: -250px;
    background: url('https://i.imgur.com/tBuVyqi.png') center/contain no-repeat;
    height: 300px;
  }

  #denasia {
    right: -250px;
    background: url('https://i.imgur.com/fdqX7Pb.png') center/contain no-repeat;
    height: 300px;
  }

  .fade-in {
    animation: fadeIn 1s ease;
  }

  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
</style>
</head>
<body>
<audio src="mylovetheme.mp3" controls autoplay loop></audio>
<div id="scene">
  <div id="moe" class="character"></div>
  <div id="denasia" class="character"></div>
  <div id="dialogue" class="fade-in"></div>
  <div id="choices"></div>
  <button id="next">â–¶ Next</button>
  <audio id="music" loop autoplay volume="0.5" 
         src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_86e3be5d8a.mp3?filename=fantasy-game-background-music-10969.mp3">
  </audio>
</div>

<script>
const dialogueBox = document.getElementById('dialogue');
const nextBtn = document.getElementById('next');
const choices = document.getElementById('choices');
const moe = document.getElementById('moe');
const denasia = document.getElementById('denasia');
const music = document.getElementById('music');

let scene = 0;

const story = [
  // Scene 1
  "ğŸŒ¸ Scene 1 â€“ A Royal Misunderstanding ğŸŒ¸<br><br>In the shining kingdom of Lumeria, Princess Denasia ruled with wisdom, charm, and a suspiciously perfect eyebrow arch.<br><br>And then there was The Fool, known to friends (and victims) as Moe â€” inventor, musician, professional distraction.",
  "Flashback:<br>Denasia: â€œMoe, you said youâ€™d be back before sunset.â€<br>Moe: â€œI was! â€¦Just not the same sunset.â€ âš¡<br>(Lightning crashes even though itâ€™s noon.)",
  "Narrator:<br>He hadnâ€™t seen her in ages. She said he 'abandoned her,' which was slightly unfair â€” heâ€™d merely become stuck inside his latest project: 'Automatic Lute 2.0 (Now With Self-Tuning Strings and Explosions).' <br><br>Quest Started: Win back the Princess before she legally renames him 'That Guy.'",
  
  // Scene 2
  "ğŸŒ¿ Scene 2 â€“ The Garden of Regret ğŸŒ¿<br><br>Setting: Talking roses, gossiping butterflies, and one depressed gnome.",
  "Rose #1: 'Psst! Thatâ€™s the neglectful one.'<br>Butterfly: 'Three weeks! Even caterpillars have shorter phases.'<br>Moe: 'I was busy improving art and accidentally inventing smoke bombs!'",
  "ğŸª· Task: Collect 3 roses. (Click them!)",
  
  // Scene 3
  "ğŸŒ‰ Scene 3 â€“ Bridge of Memories ğŸŒ‰<br><br>Each step shows glowing text bubbles â€” Moeâ€™s greatest fails.",
  "Mini-choice: 1ï¸âƒ£ Read every memory â†’ Bridge solidifies. 2ï¸âƒ£ Run past â†’ Bridge collapses and dumps him into a pond labeled Consequences.",
  
  // Scene 4
  "ğŸŒ² Scene 4 â€“ Forest of Trials (and Snacks) ğŸŒ²<br><br>Deep within the forest stood a portable bakery and a suspiciously cheerful baker.",
  "Baker: 'Traveler! Try baklava â€” pastry of passion and slightly sticky reconciliation!'<br>Moe: 'Baklava? Thatâ€™s Denasiaâ€™s favoriteâ€¦ or soon will be!'",
  
  // Scene 5
  "â„ï¸ Scene 5 â€“ The Snowy Hill of Second Chances â„ï¸<br><br>Wind howls like angry advisors.<br>Snowman NPC: 'Turn back, fool! Itâ€™s freezing!'<br>Moe: 'Iâ€™ve survived worse â€” Denasiaâ€™s silent treatment lasts longer than winter.'",
  
  // Scene 6
  "ğŸ° Scene 6 â€“ Castle of Silence ğŸ°<br><br>Setting: Candlelight. Footsteps echo. Denasia stands by the window.<br><br>Moe straightens his half-burnt cape.",
  "Moe: 'Hi. You look radiant â€” like the sunâ€™s jealous of you.'<br>Denasia: 'You look like you lost a fight with an oven.' (Half-smile detected.)",
  "Interactive Dialogue:",
  
  // Epilogue
  "ğŸ¯ Epilogue â€“ Baklava & Balance ğŸ¯<br><br>They sit under the balcony, sharing crumbs.<br><br>Denasia: 'Itâ€™s flaky, sweet, and a bit of a mess.'<br>Moe: 'Like me!'<br>Denasia: 'Exactly why I like it.'<br>Moe: 'Soâ€¦ forgiven?'<br>Denasia: 'On one condition: next time you disappear, bring more dessert.'<br>Moe: 'Deal. Iâ€™ll vanish with a bakery cart.'<br><br>And thus, harmony returned to Lumeria.<br>The Fool learned that sometimes the grandest questâ€¦ is showing up.<br><br><b>To Princess Denasia â€” I might forget time, but never you. Also, please rate my apology 5 stars and enjoy the baklava.</b><br><br>â¤ï¸ THE END â¤ï¸"
];

function showDialogue(text) {
  dialogueBox.innerHTML = text;
  dialogueBox.classList.remove('fade-in');
  void dialogueBox.offsetWidth;
  dialogueBox.classList.add('fade-in');
}

function resetChoices() {
  choices.innerHTML = "";
  nextBtn.style.display = "inline-block";
}

nextBtn.onclick = () => {
  resetChoices();

  // Character intro animations
  if (scene === 0) {
    moe.style.left = "50px";
  }
  if (scene === 6) {
    denasia.style.right = "100px";
  }

  // Scene-specific interactions
  if (scene === 5) {
    nextBtn.style.display = "none";
    showRoses();
    scene++;
    return;
  }

  if (scene === 7) {
    nextBtn.style.display = "none";
    showBridgeChoices();
    scene++;
    return;
  }

  if (scene === 10) {
    nextBtn.style.display = "none";
    showBaklavaChoices();
    scene++;
    return;
  }

  if (scene === 13) {
    nextBtn.style.display = "none";
    showDialogueWheel();
    scene++;
    return;
  }

  if (scene < story.length) {
    showDialogue(story[scene]);
    scene++;
  }
};

function showRoses() {
  showDialogue("ğŸª· Click the 3 roses to collect them!");
  choices.innerHTML = "";
  for (let i = 0; i < 3; i++) {
    const rose = document.createElement("button");
    rose.textContent = "ğŸŒ¹";
    rose.onclick = () => {
      rose.disabled = true;
      rose.textContent = "âœ…";
      if ([...choices.querySelectorAll("button")].every(b => b.disabled)) {
        showDialogue("Moe: Perfect! One for forgiveness, one for flattery, one for when she throws the first two.");
        setTimeout(resetChoices, 2000);
      }
    };
    choices.appendChild(rose);
  }
}

function showBridgeChoices() {
  showDialogue("ğŸŒ‰ Will Moe reflect or rush?");
  choices.innerHTML = `
    <button onclick="bridgeResult(true)">Read every memory</button>
    <button onclick="bridgeResult(false)">Run past</button>
  `;
}

function bridgeResult(reflect) {
  if (reflect) {
    showDialogue("Moe bravely reads every memory. The bridge glows solid beneath his feet. He crosses safely.");
  } else {
    showDialogue("Moe sprints ahead â€” the bridge collapses! SPLASH ğŸ’¦<br>Moe: 'Iâ€™ll reflect laterâ€¦ preferably somewhere drier!'");
  }
  setTimeout(resetChoices, 3000);
}

function showBaklavaChoices() {
  showDialogue("ğŸ° Choose your culinary destiny:");
  choices.innerHTML = `
    <button onclick="baklavaOutcome(1)">Buy one</button>
    <button onclick="baklavaOutcome(2)">Bake one</button>
    <button onclick="baklavaOutcome(3)">Taste-test all</button>
  `;
}

function baklavaOutcome(choice) {
  if (choice === 1) showDialogue("Moe buys one and holds it proudly. Reward: Baklava (+10 Charm, +3 Sticky Fingers)");
  if (choice === 2) showDialogue("Moe mixes everything wrong.<br>Baker: 'Youâ€™ve inventedâ€¦ flaklava.'<br>Moe: 'Patent pending.'");
  if (choice === 3) showDialogue("Baker: 'You just consumed my weekâ€™s profits!'<br>Moe: 'I call it research!'");
  setTimeout(resetChoices, 4000);
}

function showDialogueWheel() {
  showDialogue("ğŸ­ Choose Moeâ€™s approach:");
  choices.innerHTML = `
    <button onclick="denasiaResponse('A')">A. â€œIâ€™m sorry.â€</button>
    <button onclick="denasiaResponse('B')">B. â€œI brought snacks.â€</button>
    <button onclick="denasiaResponse('C')">C. â€œI built you something that only occasionally explodes.â€</button>
  `;
}

function denasiaResponse(choice) {
  if (choice === 'A') showDialogue("Denasia softens. 'You actually said sorry without inventing something. Growth!' â¤ï¸");
  if (choice === 'B') showDialogue("Denasia perks up. '...Baklava?'<br>Moe: 'I braved a talking snowman and twelve calories to get it.'");
  if (choice === 'C') showDialogue("Denasia: 'Define â€œoccasionally.â€'<br>Moe: '...Once every moon cycle?'");
  setTimeout(resetChoices, 4000);
}
</script>
</body>
</html>
